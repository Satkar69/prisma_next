generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model User {
  user_id        Int             @id @default(autoincrement())
  name           String
  age            Int
  email          String          @unique
  role           Role            @default(BASIC)
  writtenPost    Post[]          @relation("writtenBy")
  likedPost      Post[]          @relation("likedBy")
  UserPreference UserPreference?

  @@unique([name, age])
}

model UserPreference {
  profile_id    Int     @id @default(autoincrement())
  recentUpdates Boolean
  user_id       Int     @unique
  user          User    @relation(fields: [user_id], references: [user_id])
}

model Post {
  post_id    Int        @id @default(autoincrement())
  title      String?
  createdAt  DateTime
  updatedAt  DateTime
  author_id  Int
  liked_id   Int
  author     User       @relation("writtenBy", fields: [author_id], references: [user_id])
  likedBy    User       @relation("likedBy", fields: [liked_id], references: [user_id])
  categories Category[] @relation("CategoryToPost")
}

model Category {
  category_id Int    @id @default(autoincrement())
  name        String @unique
  posts       Post[] @relation("CategoryToPost")
}

enum Role {
  BASIC
  ADMIN
}
